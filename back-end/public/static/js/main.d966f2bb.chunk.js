(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),c=a.n(l),o=(a(50),a(2)),s=a(3),i=a(5),m=a(4),u=a(6),d=a(120),h=a(121),p=(a(51),a(41)),E=a.n(p);a(67),a(68);var g=function(e){return r.a.createElement(E.a,{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0},r.a.createElement("div",{className:"slick-image"},r.a.createElement("img",{src:"/images/homepage1_1.jpg"})),r.a.createElement("div",{className:"slick-image"},r.a.createElement("img",{src:"/images/homepage1_2.jpg"})),r.a.createElement("div",{className:"slick-image"},r.a.createElement("img",{src:"/images/homepage1_3.jpg"})))},v=a(119);var f=function(e){console.log(e);var t=e.data.screenshot_url.split(","),a=t[Math.floor(Math.random()*t.length)];return a=a.replace("t_thumb","t_cover_big"),r.a.createElement("div",{className:"col s3 game-card"},r.a.createElement(v.a,{to:"/game/".concat(e.data.id)},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image waves-effect waves-block waves-light"},r.a.createElement("img",{className:"activator",src:a})),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title activator grey-text text-darken-4"},e.data.name,r.a.createElement("i",{className:"material-icons right"},"more_vert"))))))},b=a(10),w=a.n(b),y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={games:[]},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(window.apiHost,"/games/getHome")).then(function(t){var a=t.data;e.setState({games:a})})}},{key:"render",value:function(){var e=this.state.games.map(function(e,t){return r.a.createElement(f,{key:t,data:e})});return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},e))}}]),t}(n.Component);var N=function(e){return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper grey darken-4"},r.a.createElement("ul",{className:"left hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement("a",{href:"sass.html"},"Sass")),r.a.createElement("li",null,r.a.createElement("a",{href:"badges.html"},"Components")),r.a.createElement("li",{className:"active"},r.a.createElement("a",{href:"collapsible.html"},"JavaScript")))))},O=(a(90),a(17)),j=a.n(O),k=(a(26),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={showAlert:!1},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){"?added=item"==this.props.location.search&&this.setState({showAlert:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col s12 home"},r.a.createElement(j.a,{show:this.state.showAlert,title:"Added",text:"We have updated your cart! Look below for similar items.",onConfirm:function(){return e.setState({showAlert:!1})}}),r.a.createElement(g,null),r.a.createElement(N,null),r.a.createElement(y,null))}}]),t}(n.Component)),A=function(e){var t={width:Math.floor(.8*window.outerWidth),height:Math.floor(.5*window.outerHeight)};t.width<1e3&&(t.width=1e3),t.height<630&&(t.height=630),t.left=Math.floor(window.screenX+(window.outerWidth-t.width)/2),t.top=Math.floor(window.screenY+(window.outerHeight-t.height)/8);var a=-1!==e.indexOf("?")?"&":"?",n="".concat(e).concat(a),r="toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0,\n    width=".concat(t.width,",height=").concat(t.height,",\n    left=").concat(t.left,",top=").concat(t.top),l=window.open(n,"_blank",r),c=window.addEventListener?"addEventListener":"attachEvent",o=window[c],s="attachEvent"===c?"onmessage":"message";return new Promise(function(e,t){o(s,function(a){if(~a.origin.indexOf("localhost")||(l.close(),t("Not allowed")),a.data.payload)try{e(JSON.parse(a.data.payload))}catch(n){e(a.data.payload)}finally{l.close()}else l.close(),t("Unauthorised")},!1)})},C=a(11),S=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).githubAuth=function(e){A("http://localhost:3000/auth/github").then(function(e){console.log(e)}).catch(function(e){console.log(e)})},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e="";return e=void 0!==this.props.auth.username?r.a.createElement("span",null,"Welcome, ",this.props.auth.username):r.a.createElement("span",null,r.a.createElement(v.a,{to:"/addFile"},"Add Files"),r.a.createElement(v.a,{to:"/login"},"Sign in")," or ",r.a.createElement(v.a,{to:"/register"},"Register"),r.a.createElement("button",{type:"button",onClick:this.githubAuth,className:"btn play-button btn-github"},"Login with github")),console.log(this.props.auth),r.a.createElement("div",{className:"login-nav-bar"},r.a.createElement("div",{className:"left valign-wrapper"},r.a.createElement(v.a,{to:"/"},"WELCOME TO ZAPP GAMES")),r.a.createElement("div",{className:"right"},e,r.a.createElement(v.a,{to:"/cart"},this.props.cart.items," - $",this.props.cart.total)))}}]),t}(n.Component);var T=Object(C.b)(function(e){return{auth:e.auth,cart:e.cart}})(S);var P=function(e){return r.a.createElement("div",{className:"logo-search-header"},r.a.createElement("div",{className:"left"},r.a.createElement(v.a,{to:"/"},r.a.createElement("img",{src:"/images/logo.png"}))),r.a.createElement("div",{className:"right"},r.a.createElement("input",{type:"text",placeholder:"Search"})))};var _=function(e){return r.a.createElement("div",{className:"main-nav"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper red darken-4"},r.a.createElement("ul",{className:"left hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement("a",{href:"sass.html"},"Sass")),r.a.createElement("li",null,r.a.createElement("a",{href:"badges.html"},"Components")),r.a.createElement("li",{className:"active"},r.a.createElement("a",{href:"collapsible.html"},"JavaScript"))))))};a(104);var x=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container-fluid center grey darken-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"container"},r.a.createElement(T,null)))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(P,null)),r.a.createElement("div",{className:"row"},r.a.createElement(_,null))))},H=a(8),L=function(e){return console.log("Login action is running!"),console.log(e),console.log(window.apiHost),{type:"LOGIN_ACTION",payload:w()({url:"".concat(window.apiHost,"/login"),method:"POST",data:e})}},M=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleLogin=function(t){t.preventDefault();var a=t.target[0].value,n=t.target[1].value;e.props.loginAction({username:a,password:n})},e.state={showAlert:!1,msg:""},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log(e),"badPassword"===e.auth.msg?this.setState({showAlert:!0,msg:"Please re-enter your password"}):"badUser"===e.auth.msg?this.setState({showAlert:!0,msg:"Username not found"}):"loginSuccess"===e.auth.msg&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement(j.a,{show:this.state.showAlert,title:"Login Error",text:this.state.msg,onConfirm:function(){return e.setState({showAlert:!1})}}),r.a.createElement("center",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"z-depth-1 grey lighten-4 row login"},r.a.createElement("form",{className:"col s12",onSubmit:this.handleLogin},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"email",name:"email",id:"email"}),r.a.createElement("label",{htmlFor:"email"},"Enter your email"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"password",name:"password",id:"password"}),r.a.createElement("label",{htmlFor:"password"},"Enter your password")),r.a.createElement("label",null,r.a.createElement("a",{className:"pink-text",href:"#!"},r.a.createElement("b",null,"Forgot Password?")))),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit",name:"btn_login",className:"col s12 btn btn-large waves-effect indigo"},"Login")))))),r.a.createElement(v.a,{to:"/register"},"Create account")),r.a.createElement("div",{className:"section"}),r.a.createElement("div",{className:"section"}))}}]),t}(n.Component);var D=Object(C.b)(function(e){return{auth:e.auth}},function(e){return Object(H.b)({loginAction:L},e)})(M),F=function(e){return console.log("Auth action is running!"),console.log(e),console.log(window.apiHost),{type:"AUTH_ACTION",payload:w()({url:"".concat(window.apiHost,"/register"),method:"POST",data:e})}},I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).registerSubmit=function(t){t.preventDefault();var a=t.target[0].value,n=t.target[1].value;e.props.authAction({username:a,password:n})},e.state={msg:"",showAlert:!1},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log(e),"userExists"===e.auth.msg?this.setState({showAlert:!0}):"userAdded"===e.auth.msg&&this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.state.msg;return r.a.createElement("main",null,r.a.createElement(j.a,{show:this.state.showAlert,title:"Registration Error",text:"Email is already registered. Login or chooose a different email.",onConfirm:function(){return e.setState({showAlert:!1})}}),r.a.createElement("center",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"z-depth-1 grey lighten-4 row login"},r.a.createElement("h3",null,t),r.a.createElement("form",{className:"col s12",onSubmit:this.registerSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"email",name:"email",id:"email"}),r.a.createElement("label",{htmlFor:"email"},"Enter your email"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"password",name:"password",id:"password"}),r.a.createElement("label",{htmlFor:"password"},"Enter your password")),r.a.createElement("label",null,r.a.createElement("a",{className:"pink-text",href:"#!"},r.a.createElement("b",null,"Forgot Password?")))),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit",name:"btn_login",className:"col s12 btn btn-large waves-effect indigo"},"Register"))))))),r.a.createElement("div",{className:"section"}),r.a.createElement("div",{className:"section"}))}}]),t}(n.Component);var R=Object(C.b)(function(e){return{auth:e.auth}},function(e){return Object(H.b)({authAction:F},e)})(I),U=(a(105),function(e,t){return console.log(e),{type:"UPDATE_CART",payload:w()({method:"POST",url:"".concat(window.apiHost,"/cart/updateCart"),data:{token:e,itemId:t}})}}),W=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).addToCart=function(t){var a=e.props.auth.token;e.props.updateCart(a,e.state.game.id)},e.state={game:{}},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.cart.length!==this.props.cart.length&&this.props.history.push("/?added=item")}},{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id);var t=this.props.match.params.id;w.a.get("".concat(window.apiHost,"/games/").concat(t)).then(function(t){var a=t.data[0];e.setState({game:a})})}},{key:"render",value:function(){console.log(this.state.game);var e="";return this.state.game.screenshot_url&&(e=(e=this.state.game.screenshot_url.split(",")[0]).replace("t_thumb","t_cover_big")),r.a.createElement("div",{className:"game-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m4"},r.a.createElement("img",{src:e,alt:"",className:"game-pic"})),r.a.createElement("div",{className:"col s12 m8"},r.a.createElement("div",{className:"row"},r.a.createElement("h3",{className:"game-title"},this.state.game.name),r.a.createElement("div",{className:"game-desc"},r.a.createElement("p",null,this.state.game.summary))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s1"},r.a.createElement("span",null,"Qty:")),r.a.createElement("div",{className:"col s8"},r.a.createElement("input",{type:"text",name:"quantity"})),r.a.createElement("div",{className:"col s2"},r.a.createElement("button",{onClick:this.addToCart},"Add To Cart"))))))}}]),t}(n.Component);var G=Object(C.b)(function(e){return{auth:e.auth,cart:e.cart}},function(e){return Object(H.b)({updateCart:U},e)})(W),J=a(16),z=function(e){return{type:"GET_CART",payload:w()({method:"POST",url:"".concat(window.apiHost,"/cart/getCart"),data:{token:e}})}};var B=function(e){var t=e.product;return r.a.createElement("tr",null,r.a.createElement("td",null,t.productName),r.a.createElement("td",null,t.buyPrice),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger"},"Delete")))},Y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).makePayment=e.makePayment.bind(Object(J.a)(e)),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"makePayment",value:function(){var e=this;window.StripeCheckout.configure({key:"pk_test_K9L17worNm0z7lHpdssTpwqr",locale:"auto",image:"http://www.digitalcrafts.com/sites/all/themes/digitalcrafts/images/digitalcrafts-site-logo.png",token:function(t){console.log(t),console.log(e.props.auth.token);var a={amount:100*e.props.cart.totalPrice,stripeToken:t.id,userToken:e.props.auth.token};w()({method:"POST",url:"".concat(window.apiHost,"/stripe"),data:a}).then(function(t){console.log(t),"paymentSuccess"===t.data.msg?e.props.history.push("/thankyou"):console.log(t.data.msg)})}}).open({name:"Pay Now",description:"Classic Models order",amount:100*this.props.cart.totalPrice})}},{key:"componentDidMount",value:function(){console.log(this.props.auth),void 0===this.props.auth.token||this.props.getCart(this.props.auth.token)}},{key:"render",value:function(){if(console.log(this.props.cart),this.props.cart.totalItems){var e=this.props.cart.products.map(function(e,t){return r.a.createElement(B,{key:t,product:e})});return r.a.createElement("div",null,r.a.createElement("h2",null,"Your order total is: $",this.props.cart.totalPrice," - ",r.a.createElement("button",{className:"btn btn-primary",onClick:this.makePayment},"Checkout!")),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Remove"))),r.a.createElement("tbody",null,e)))}return r.a.createElement("div",null,r.a.createElement("h3",null,"Your cart is empty! Get shopping or ",r.a.createElement(v.a,{to:"/login"},"login")))}}]),t}(n.Component);var q=Object(C.b)(function(e){return{auth:e.auth,cart:e.cart}},function(e){return Object(H.b)({getCart:z},e)})(Y),$=function(e){var t=new FormData,a=!0,n=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var o=l.value;t.append("file",o)}}catch(s){n=!0,r=s}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}console.log(t);return{type:"AUTH_ACTION",payload:w.a.post("".concat(window.apiHost,"/filesUp"),t,{headers:{"content-type":"multipart/form-data"}})}},K=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).formS=function(t){t.preventDefault();var a=document.getElementById("files").files;console.dir(a),e.props.sendFiles(a)},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.formS},r.a.createElement("input",{type:"file",id:"files",multiple:!0,name:"files"}),r.a.createElement("button",{type:"submit",value:"submit"},"Submit"))}}]),t}(n.Component);var Q=Object(C.b)(null,function(e){return Object(H.b)({sendFiles:$},e)})(K),X=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("div",{className:"container center"},r.a.createElement(h.a,{exact:!0,path:"/",component:k}),r.a.createElement(h.a,{exact:!0,path:"/login",component:D}),r.a.createElement(h.a,{exact:!0,path:"/register",component:R}),r.a.createElement(h.a,{exact:!0,path:"/game/:id",component:G}),r.a.createElement(h.a,{exact:!0,path:"/cart",component:q}),r.a.createElement(h.a,{exact:!0,path:"/addFile",component:Q}))))}}]),t}(n.Component),Z=Object(H.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"AUTH_ACTION"===t.type||"LOGIN_ACTION"===t.type?(console.log(t.payload.data),t.payload.data):"LOGOUT"===t.type?[]:e},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CART":case"GET_CART":return t.payload.data;default:return e}}}),V=a(44),ee=a.n(V),te=Object(H.a)(ee.a)(H.d)(Z);c.a.render(r.a.createElement(C.a,{store:te},r.a.createElement(X,null)),document.getElementById("root"))},45:function(e,t,a){e.exports=a(118)},50:function(e,t,a){},51:function(e,t,a){},90:function(e,t,a){}},[[45,1,2]]]);
//# sourceMappingURL=main.d966f2bb.chunk.js.map